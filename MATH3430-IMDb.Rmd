---
title: "MATH3430-IMDb"
author: "MB"
date: "2025-11-19"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(readxl)
library(dplyr)
library(ggplot2)
```

This is the code we used to load the oversized Excel files and clean the data that is used to create the graphs. NO ONE HAS TO RUN THIS PART OF THE CODE. JUST LOAD THE LIBRARIES AND THE READ_EXCEL.
```
raw_basics <- read_excel("title.basics.xlsx", na = '\\N')
raw_ratings <- read_excel("title.ratings.xlsx", na = '\\N')
```
```
movie_only_basics <- raw_basics %>% 
  filter(titleType == 'movie') %>% 
  select(-endYear, -titleType, -isAdult, -originalTitle) %>% 
  rename(releaseYear = startYear)

write_xlsx(movie_only_basics, path = "movie_only_basics.xlsx")
```
```
movie_and_rating_tidy <- inner_join(raw_ratings, movie_only_basics, by = "tconst")

write_xlsx(movie_and_rating_tidy, path = "movie_and_rating_tidy.xlsx")
```
```
movie_ratings <- movie_and_rating_tidy %>% 
  select(tconst:numVotes)

write_xlsx(movie_ratings, path = "movie_ratings.xlsx")
```
```{r}
movies <- read_excel("movie_only_basics.xlsx")
ratings <- read_excel("movie_ratings.xlsx")
movies_and_ratings <- read_excel("movie_and_rating_tidy.xlsx")
```

```{r}
movies <- movies %>%
  mutate(across(where(is.character),
                ~gsub("[^\x20-\x7E]", "", .x))) %>% 
  rename(title = primaryTitle)
```

```{r}
not_null_runtimes <- movies %>% 
  filter(!is.na(runtimeMinutes))

not_null_runtimes

not_null_genres <- movies %>%
  filter(!is.na(genres))

not_null_genres
```

```{r}
not_null_runtimes %>% 
  group_by(runtimeMinutes) %>% 
  summarize(n = n()) %>% 
  arrange(desc(n))
```

```{r}
movies_decade <- clean_movies %>% 
  mutate(decade = floor(releaseYear / 10) * 10) %>% 
  count(decade)

ggplot(movies_decade, aes(x = decade, y = n)) +
  geom_point() +
  geom_line(linewidth = 0.75, color = "blue") +
  labs(title = "Numbers of Movie Releases over Time",
       x = "Decade",
       y = "Number of Movie Releases")

#We have investigated this weird graph. The results we have came up with is that the data set is slightly out of date and as far as we know this graph accurately represents the d0.5 it has been given

```




